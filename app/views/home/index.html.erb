
<div class= "home-container">

  <div id= "welcome">
    <div class="page-section flexbox vertical stretch" style= "margin-top: 2em; margin-bottom: 2em">
      <div class="section-inner flexbox vertical stretch" style= "margin-right: 5em; margin-left: 5em;">
        <div class="section-title flexbox horizontal center">
          <h1>CiTrust us to get to your destination!</h1>
        </div>
          <p style= "margin-bottom: 2em"> With stations across Amherst, Northampton, Hampshire, and Springfield, perform errands with ease or have fun exploring scenic bike routes!</p>
          <%= link_to('Start Now', map_home_index_path, class: 'button') %>
      </div>
    </div>
  </div>

  <div id= "bikeimg" style= "max-width: 800px; position: static; margin: auto;">
      <%= image_tag('Clemenbykes stock photo.png') %>
  </div>

  <div id="howto">
    <div class="page-section flexbox vertical stretch" style= "margin-top: 5em; margin-bottom: 3em" >
      <div class="section-inner flexbox vertical stretch">
        <div class="section-title flexbox horizontal center">
            <h1><b>How It Works</b></h1>
        </div>
        <div class="container" style= "text-align: center;">
              <div class="row" style= "margin:1em">
                <div class="column" style= "margin-right: 2em; padding: 1em;">
                      <h1>Step 1</h1>
                      <%= image_tag('get code.png')%>
                      <h2> <b>Get Code </b> </h2>
                      <p> After choosing a station and time, simply click "Rent Now" and a unique code will be generated for you!</p>
                </div>
                <div class="column" style= "margin-right: 2em; padding: 1em;">
                    <h1>Step 2</h1>
                    <%= image_tag('kiosk unlock.png')%>
                    <h2><b>Unlock</b></h2>
                    <p> Enter your code at our kiosks located at each station and a bike will unlock!</p>
                </div>
                <div class="column" style= "margin-right: 2em; padding: 1em;">
                    <h1>Step 3</h1>
                    <%= image_tag('ride bike.png')%>
                    <h2><b>Ride</b></h2>
                    <p> Have a sweet time riding!</p>
                </div> 
                <div class="column" style= "padding: 1em;">
                    <h1>Step 4</h1>
                    <%= image_tag('return bike.png')%>
                    <h2><b>Return</b></h2>
                    <p>At the closest station near you, return the bike and you are all set!</p>
                </div> 
              </div>
            </div>    
        </div>
    </div>
  </div>


  <div id= "desc">
    <div class="page-section flexbox vertical stretch">
      <div class="section-inner flexbox vertical stretch">
        <div class="section-title flexbox horizontal center">
          <h2 style= "margin-top: 2em">Checkout Our Stations Around the Pioneer Valley!</h2>
        </div>
      </div>
    </div>
    
  </div>



  <div id="map"></div>


  <script>
  // Check if 'map' is already defined

    mapboxgl.accessToken = 'pk.eyJ1IjoieWxvbzEyMyIsImEiOiJjbG9sdDJxYjAwdHR2Mmxxb2FsaG9nN2lvIn0.OZGWalV5uPOOaCrC7TwbWg';
    const map = new mapboxgl.Map({
      container: 'map', // container ID
      style: 'mapbox://styles/mapbox/streets-v12', // style URL
      center: [-72.64, 42.325], // starting position [lng, lat]
      zoom: 11.5 // starting zoom
    });

    // Iterates all stations, creating new location marker for each using longitude and latitude attributes
    <% @stations.each do |station| %>
      new mapboxgl.Marker({ color: 'orange' })
        .setLngLat([<%= station.longitude %>, <%= station.latitude %>])
        .setPopup(
          new mapboxgl.Popup({ offset: 25 })
            .setHTML("<h3><%= station.name %></h3><p>Docked Bike Count: <%= station.docked_bikes.count %></p>")
        )
        .addTo(map);
    <% end %>
  </script>


 

</div>
