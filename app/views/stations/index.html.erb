<div class="page-section flexbox vertical stretch">
  <div class="section-inner flexbox vertical stretch">
    <div class="section-title">
      <h1>Station Map</h1>
    </div>
    <div class="map-container">
      <div id="map">
        <script>
          var map = L.map('map').setView([42.3163031, -72.6424982], 13);
                      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        maxZoom: 19,
                        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                      }).addTo(map)
          var popup = L.popup();

          function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString())
        .openOn(map);
}

          <% if @stations.present? & @bikes.present? %>
            <% @stations.each_with_index do |item| %>
                var marker = L.marker([<%= item[:xcoord] %>, <%= item[:ycoord] %>]).addTo(map);

            <% end %>
          <% end %>

          map.on('click', onMapClick);
        </script>
      </div>
    <style media="screen">
      #map { height: 500px; }
    </style>
    <header class="main" id="siteheader">
      <a href="#menu" class="menu-link active"><span></span> <a href="#">Stations</a></a>
    </header>
      <nav id="menu" class="menu">
        <ul class="level-1">
          <% if @stations.present? & @bikes.present? %>
            <% @stations.each do |item| %>
              <%= link_to(item[:name] , station_path(item), class: 'action show') %>
              <br>
            <% end %>
          <% else %>
          <div class="empty">
            No stations found.
          </div>
          <% end %>
        </ul>
      </nav>
	</div>
</div>
